(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{64765:function(e,t,s){Promise.resolve().then(s.bind(s,6925))},6925:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return L}});var a=s(57437),n=s(2265),r=s(60429),i=s(31331),o=s(16331),c=s(20322),l=s(16687),d=s(82405),m=s(10296);function u(e){let{status:t,size:s="md",animated:n=!1,label:i,className:o=""}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat(o),children:[(0,a.jsx)(r.E.div,{className:"\n          rounded-full border-2 border-white/20\n          ".concat({xs:"w-2 h-2",sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"}[s],"\n          ").concat({online:"status-online",offline:"status-offline",error:"status-error",warning:"status-warning"}[t],"\n          ").concat(n?"animate-status-pulse":"","\n        "),initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30,delay:.1}}),i&&(0,a.jsx)("span",{className:"text-sm text-slate-300",children:i||(()=>{switch(t){case"online":return"Online";case"offline":return"Offline";case"error":return"Error";case"warning":return"Warning"}})()})]})}function x(e){let{title:t,value:s,icon:n,status:i,subtitle:o,trend:c,trendValue:l,onClick:d,className:m=""}=e;return(0,a.jsxs)(r.E.div,{className:"card-gaming p-4 cursor-pointer ".concat(m),onClick:d,whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:25},children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"text-primary-400",children:n}),i&&(0,a.jsx)(u,{status:i,size:"xs",animated:!0})]})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-slate-300",children:t}),(0,a.jsxs)("div",{className:"flex items-end justify-between",children:[(0,a.jsx)("span",{className:"text-2xl font-bold ".concat((e=>{switch(e){case"online":return"text-success-400";case"error":return"text-danger-400";case"warning":return"text-warning-400";default:return"text-slate-400"}})(s)),children:"string"==typeof s&&i?(0,a.jsx)("span",{className:"capitalize",children:s}):s}),c&&l&&(0,a.jsxs)("div",{className:"text-xs ".concat((()=>{switch(c){case"up":return"text-success-400";case"down":return"text-danger-400";default:return"text-slate-400"}})()," flex items-center gap-1"),children:[(0,a.jsx)("span",{children:(()=>{switch(c){case"up":return"↗";case"down":return"↘";default:return"→"}})()}),(0,a.jsx)("span",{children:l})]})]}),o&&(0,a.jsx)("p",{className:"text-xs text-slate-400",children:o})]})]})}var h=s(47625),p=s(7476),f=s(56940),g=s(97059),j=s(62994),b=s(8147),v=s(23263),y=s(17868);function N(e){let{data:t=[],metric:s="cpu_usage",height:n=200}=e,r=t.slice(-50).map(e=>({time:(0,y.Z)(new Date(e.timestamp),"HH:mm:ss"),value:e[s]||0,timestamp:e.timestamp})),i=(()=>{switch(s){case"cpu_usage":return{name:"CPU Usage",color:"#3b82f6",suffix:"%",max:100};case"memory_usage":return{name:"Memory Usage",color:"#10b981",suffix:"MB",max:void 0};case"response_time":return{name:"Response Time",color:"#f59e0b",suffix:"ms",max:void 0};case"commands_per_second":return{name:"Commands/sec",color:"#8b5cf6",suffix:"",max:void 0};case"error_rate":return{name:"Error Rate",color:"#ef4444",suffix:"%",max:100};default:return{name:"Value",color:"#6b7280",suffix:"",max:void 0}}})();return t.length?(0,a.jsx)("div",{style:{height:n},children:(0,a.jsx)(h.h,{width:"100%",height:"100%",children:(0,a.jsxs)(p.T,{data:r,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:i.color,stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:i.color,stopOpacity:.05})]})}),(0,a.jsx)(f.q,{strokeDasharray:"3 3",stroke:"#475569",opacity:.3}),(0,a.jsx)(g.K,{dataKey:"time",stroke:"#94a3b8",fontSize:12,tick:{fill:"#94a3b8"},tickLine:{stroke:"#475569"}}),(0,a.jsx)(j.B,{stroke:"#94a3b8",fontSize:12,tick:{fill:"#94a3b8"},tickLine:{stroke:"#475569"},domain:i.max?[0,i.max]:["auto","auto"]}),(0,a.jsx)(b.u,{content:(0,a.jsx)(e=>{let{active:t,payload:s,label:n}=e;if(t&&s&&s.length){var r;let e=s[0];return(0,a.jsxs)("div",{className:"glass-effect rounded-lg p-3 border border-slate-600/50",children:[(0,a.jsxs)("p",{className:"text-slate-300 text-sm mb-1",children:["Time: ",(0,a.jsx)("span",{className:"text-white",children:n})]}),(0,a.jsxs)("p",{className:"text-slate-300 text-sm",children:[i.name,": ",(0,a.jsxs)("span",{className:"font-semibold",style:{color:i.color},children:[null===(r=e.value)||void 0===r?void 0:r.toFixed(2),i.suffix]})]})]})}return null},{})}),(0,a.jsx)(v.u,{type:"monotone",dataKey:"value",stroke:i.color,strokeWidth:2,fill:"url(#colorValue)",dot:{fill:i.color,strokeWidth:2,r:3},activeDot:{r:5,fill:i.color,stroke:"#fff",strokeWidth:2}})]})})}):(0,a.jsx)("div",{className:"flex items-center justify-center bg-slate-800/30 rounded-lg",style:{height:n},children:(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"No performance data available"})})}var w=s(69729),S=s(59035),_=s(60007),k=s(75945),C=s(84081);function E(e){let{session:t,activeMode:s,stats:n}=e;return(0,a.jsxs)(r.E.div,{className:"card-gaming p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5 text-primary-400"}),"Session Monitor"]}),(0,a.jsx)(u,{status:t?"running"===t.status?"online":"error"===t.status?"error":"warning":"offline",animated:!0,label:(null==t?void 0:t.status)||"No Session"})]}),t?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Character"}),(0,a.jsx)("p",{className:"font-semibold text-white",children:t.character_name||"Unknown"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Server"}),(0,a.jsx)("p",{className:"font-semibold text-primary-400",children:t.server||"Default"})]})]}),s&&(0,a.jsxs)("div",{className:"p-3 bg-primary-500/10 border border-primary-500/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 text-primary-400"}),(0,a.jsx)("p",{className:"text-sm font-medium text-primary-400",children:"Active Mode"})]}),(0,a.jsx)("p",{className:"text-white font-semibold",children:s}),(0,a.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["Started ",t.mode_start_time?(0,C.Z)(new Date(t.mode_start_time))+" ago":"recently"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-slate-800/30 rounded-lg",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 text-slate-400 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Runtime"}),(0,a.jsx)("p",{className:"font-semibold text-white",children:(e=>{let t=Math.floor(e/3600),s=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,"h ").concat(s,"m ").concat(a,"s"):"".concat(s,"m ").concat(a,"s")})(n.total_runtime)})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-slate-800/30 rounded-lg",children:[(0,a.jsx)(l.Z,{className:"h-5 w-5 text-slate-400 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Commands"}),(0,a.jsx)("p",{className:"font-semibold text-white",children:n.commands_executed})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-slate-800/30 rounded-lg",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-slate-400 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Success Rate"}),(0,a.jsxs)("p",{className:"font-semibold ".concat(n.success_rate>=90?"text-success-400":n.success_rate>=70?"text-warning-400":"text-danger-400"),children:[n.success_rate.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-slate-800/30 rounded-lg",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 text-slate-400 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Last Activity"}),(0,a.jsx)("p",{className:"font-semibold text-white",children:n.last_activity?(0,C.Z)(new Date(n.last_activity))+" ago":"Never"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsxs)("button",{className:"button-primary flex-1 flex items-center justify-center gap-2",onClick:()=>{},children:[(0,a.jsx)(S.Z,{className:"h-4 w-4"}),"Start"]}),(0,a.jsxs)("button",{className:"button-secondary flex-1 flex items-center justify-center gap-2",onClick:()=>{},children:[(0,a.jsx)(_.Z,{className:"h-4 w-4"}),"Pause"]}),(0,a.jsxs)("button",{className:"button-danger flex-1 flex items-center justify-center gap-2",onClick:()=>{},children:[(0,a.jsx)(k.Z,{className:"h-4 w-4"}),"Stop"]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(w.Z,{className:"h-12 w-12 text-slate-600 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-slate-400 mb-2",children:"No active session"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Start a new session to begin monitoring"}),(0,a.jsx)("button",{className:"button-primary mt-4",children:"Create Session"})]})]})}var A=s(5095),D=s(1442),Z=s(20301),M=s(67442);function P(e){let{onCommand:t,disabled:s=!1}=e,[i,o]=(0,n.useState)(""),[c,d]=(0,n.useState)([]),[m,u]=(0,n.useState)(-1),x=(0,n.useRef)(null),h=(0,n.useRef)(null);(0,n.useEffect)(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[c]);let p=e=>{switch(e){case"pending":return(0,a.jsx)("div",{className:"loading-spinner w-3 h-3"});case"success":return(0,a.jsx)(D.Z,{className:"h-3 w-3 text-success-400"});case"error":return(0,a.jsx)(Z.Z,{className:"h-3 w-3 text-danger-400"})}},f=e=>{switch(e){case"pending":return"text-warning-400";case"success":return"text-success-400";case"error":return"text-danger-400"}};return(0,a.jsxs)(r.E.div,{className:"card-gaming p-6 h-96 flex flex-col",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"h-5 w-5 text-primary-400"}),"Command Interface"]}),(0,a.jsx)("div",{ref:h,className:"flex-1 bg-black/50 rounded-lg p-3 mb-4 overflow-y-auto font-mono text-sm space-y-2",children:(0,a.jsx)(A.M,{children:0===c.length?(0,a.jsxs)("div",{className:"text-slate-500 text-center py-4",children:[(0,a.jsx)(l.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No commands executed yet"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Type a command below to get started"})]}):c.map(e=>(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-primary-400",children:"$"}),(0,a.jsx)("span",{className:"text-slate-200",children:e.command}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[p(e.status),(0,a.jsx)("span",{className:"text-xs text-slate-400",children:new Date(e.timestamp).toLocaleTimeString()})]})]}),e.response&&(0,a.jsx)("div",{className:"pl-4 text-xs ".concat(f(e.status)),children:e.response})]},e.id))})}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!i.trim()||s)return;let a={id:Date.now().toString(),command:i.trim(),timestamp:Date.now(),status:"pending"};d(e=>[...e,a]),t({type:"manual_command",command:i.trim(),timestamp:Date.now()}),setTimeout(()=>{d(e=>e.map(e=>e.id===a.id?{...e,status:Math.random()>.2?"success":"error",response:Math.random()>.2?'Command "'.concat(i.trim(),'" executed successfully'):'Error: Command "'.concat(i.trim(),'" failed')}:e))},1e3+2e3*Math.random()),o(""),u(-1)},className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-primary-400 font-mono",children:"$"}),(0,a.jsx)("input",{ref:x,type:"text",value:i,onChange:e=>o(e.target.value),onKeyDown:e=>{if("ArrowUp"===e.key){e.preventDefault();let t=c.map(e=>e.command);if(t.length>0){let e=Math.min(m+1,t.length-1);u(e),o(t[t.length-1-e]||"")}}else if("ArrowDown"===e.key){if(e.preventDefault(),m>0){let e=c.map(e=>e.command),t=m-1;u(t),o(e[e.length-1-t]||"")}else u(-1),o("")}},placeholder:"Enter MS11 command...",disabled:s,className:"\n              w-full pl-8 pr-4 py-2 bg-slate-800/50 border border-slate-600/50 rounded-lg\n              text-slate-200 font-mono text-sm placeholder-slate-400\n              focus:border-primary-500/50 focus:ring-1 focus:ring-primary-500/30\n              focus:outline-none transition-colors duration-200\n              ".concat(s?"opacity-50 cursor-not-allowed":"","\n            ")})]}),(0,a.jsx)("button",{type:"submit",disabled:!i.trim()||s,className:"button-primary px-3 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(M.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-slate-500",children:[(0,a.jsx)("p",{children:"Use ↑/↓ arrows for command history"}),(0,a.jsx)("p",{children:'Examples: "start_mode combat", "check_health", "pause_session"'})]})]})}var T=s(55026),I=s(59152),O=s(47842);function R(e){let{onCommand:t,disabled:s=!1}=e,[i,c]=(0,n.useState)(null),l=async(e,a)=>{if(!s){c(e);try{t(e),await new Promise(e=>setTimeout(e,1e3))}finally{c(null)}}},d=[{id:"start_session",label:"Start Session",icon:S.Z,color:"text-success-400",bgColor:"bg-success-500/10 hover:bg-success-500/20",borderColor:"border-success-500/20 hover:border-success-500/40"},{id:"pause_session",label:"Pause Session",icon:_.Z,color:"text-warning-400",bgColor:"bg-warning-500/10 hover:bg-warning-500/20",borderColor:"border-warning-500/20 hover:border-warning-500/40"},{id:"stop_session",label:"Stop Session",icon:k.Z,color:"text-danger-400",bgColor:"bg-danger-500/10 hover:bg-danger-500/20",borderColor:"border-danger-500/20 hover:border-danger-500/40"},{id:"reload_config",label:"Reload Config",icon:T.Z,color:"text-primary-400",bgColor:"bg-primary-500/10 hover:bg-primary-500/20",borderColor:"border-primary-500/20 hover:border-primary-500/40"},{id:"run_diagnostics",label:"Run Diagnostics",icon:I.Z,color:"text-slate-400",bgColor:"bg-slate-500/10 hover:bg-slate-500/20",borderColor:"border-slate-500/20 hover:border-slate-500/40"},{id:"emergency_stop",label:"Emergency Stop",icon:O.Z,color:"text-red-400",bgColor:"bg-red-500/10 hover:bg-red-500/20",borderColor:"border-red-500/20 hover:border-red-500/40"}];return(0,a.jsxs)(r.E.div,{className:"card-gaming p-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-primary-400"}),"Quick Actions"]}),(0,a.jsx)("div",{className:"space-y-3",children:d.map((e,t)=>{let n=e.icon,o=i===e.id;return(0,a.jsxs)(r.E.button,{className:"\n                w-full p-3 rounded-lg border transition-all duration-200\n                ".concat(e.bgColor," ").concat(e.borderColor,"\n                flex items-center justify-center gap-3\n                ").concat(s?"opacity-50 cursor-not-allowed":"hover:scale-102 active:scale-98","\n              "),onClick:()=>l(e.id,e.label),disabled:s||o,initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4+.1*t},whileHover:s?{}:{scale:1.02},whileTap:s?{}:{scale:.98},children:[o?(0,a.jsx)("div",{className:"loading-spinner w-4 h-4"}):(0,a.jsx)(n,{className:"h-4 w-4 ".concat(e.color)}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(e.color),children:e.label})]},e.id)})}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-slate-800/50 rounded-lg",children:(0,a.jsx)("p",{className:"text-xs text-slate-400 text-center",children:s?"Connect to MS11 server to enable actions":"All systems ready"})})]})}function L(){let{isConnected:e,sendCommand:t}=(0,d.sO)(),{user:s}=(0,m.a)(),h=(0,d.$q)(),p=(0,d.PF)(),f=(0,d.uS)(),[g,j]=(0,n.useState)({ms11_core:"offline",database:"offline",cache:"offline",ocr_engine:"offline",last_updated:new Date().toISOString()}),[b,v]=(0,n.useState)(null),[y,w]=(0,n.useState)(null),[S,_]=(0,n.useState)({total_runtime:0,commands_executed:0,success_rate:0,last_activity:null});(0,n.useEffect)(()=>{let e=async()=>{try{let i=await fetch("/api/health");if(i.ok){var e,t,s,a,n,r;let o=await i.json();j({ms11_core:"healthy"===o.status?"online":"error",database:(null===(t=o.components)||void 0===t?void 0:null===(e=t.database)||void 0===e?void 0:e.status)==="healthy"?"online":"error",cache:(null===(a=o.components)||void 0===a?void 0:null===(s=a.cache)||void 0===s?void 0:s.status)==="healthy"?"online":"error",ocr_engine:(null===(r=o.components)||void 0===r?void 0:null===(n=r.ocr)||void 0===n?void 0:n.status)==="healthy"?"online":"error",last_updated:new Date().toISOString()})}}catch(e){console.error("Failed to fetch system status:",e)}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]),(0,n.useEffect)(()=>{h&&(v(h),h.stats&&_(h.stats))},[h]),(0,n.useEffect)(()=>{p&&w(p.mode_name||null)},[p]);let k=()=>{let e=Object.values(g).slice(0,-1);return e.every(e=>"online"===e)?"online":e.some(e=>"error"===e)?"error":"warning"},C={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return(0,a.jsx)("div",{className:"min-h-screen p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)(r.E.div,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold font-game text-white mb-2",children:"MS11 Dashboard"}),(0,a.jsxs)("p",{className:"text-slate-400",children:["Welcome back, ",(0,a.jsx)("span",{className:"text-primary-400",children:(null==s?void 0:s.username)||"User"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u,{status:e?"online":"offline",size:"sm",animated:!0}),(0,a.jsx)("span",{className:"text-sm text-slate-400",children:e?"Connected":"Disconnected"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u,{status:k(),size:"sm",animated:!0}),(0,a.jsxs)("span",{className:"text-sm text-slate-400",children:["System ",k()]})]})]})]}),(0,a.jsxs)(r.E.div,{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[(0,a.jsx)(r.E.div,{variants:C,className:"lg:col-span-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(x,{title:"MS11 Core",value:g.ms11_core,icon:(0,a.jsx)(i.Z,{className:"h-6 w-6"}),status:g.ms11_core}),(0,a.jsx)(x,{title:"Database",value:g.database,icon:(0,a.jsx)(o.Z,{className:"h-6 w-6"}),status:g.database}),(0,a.jsx)(x,{title:"Cache",value:g.cache,icon:(0,a.jsx)(c.Z,{className:"h-6 w-6"}),status:g.cache}),(0,a.jsx)(x,{title:"OCR Engine",value:g.ocr_engine,icon:(0,a.jsx)(l.Z,{className:"h-6 w-6"}),status:g.ocr_engine})]})}),(0,a.jsx)(r.E.div,{variants:C,className:"lg:col-span-2",children:(0,a.jsx)(E,{session:b,activeMode:y,stats:S})}),(0,a.jsx)(r.E.div,{variants:C,children:(0,a.jsx)(R,{onCommand:e=>{t({type:"quick_action",command:e,timestamp:Date.now()})},disabled:!e})}),(0,a.jsx)(r.E.div,{variants:C,className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"card-gaming p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-primary-400"}),"Performance Metrics"]}),(0,a.jsx)(N,{data:f})]})}),(0,a.jsx)(r.E.div,{variants:C,children:(0,a.jsx)(P,{onCommand:t,disabled:!e})})]}),(0,a.jsxs)(r.E.div,{className:"text-center text-sm text-slate-500",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:["Last updated: ",new Date(g.last_updated).toLocaleTimeString()]})]})})}},10296:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return c},a:function(){return l}});var a=s(57437),n=s(2265),r=s(99376),i=s(46175);let o=(0,n.createContext)(void 0);function c(e){let{children:t}=e,[s,c]=(0,n.useState)(null),[l,d]=(0,n.useState)(!0),m=(0,r.useRouter)();(0,n.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=localStorage.getItem("ms11_token");if(!e){d(!1);return}let t=await fetch("/api/auth/verify",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();c({...e,lastLoginAt:new Date(e.lastLoginAt)})}else localStorage.removeItem("ms11_token")}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("ms11_token")}finally{d(!1)}},x=async(e,t)=>{try{d(!0);let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(s.ok){let e=await s.json();return localStorage.setItem("ms11_token",e.token),c({...e.user,lastLoginAt:new Date}),i.Am.success("Welcome back, ".concat(e.user.username,"!")),m.push("/dashboard"),!0}{let e=await s.json();return i.Am.error(e.message||"Login failed"),!1}}catch(e){return console.error("Login error:",e),i.Am.error("Connection error - please try again"),!1}finally{d(!1)}},h=async e=>{if(s)try{let t={...s.preferences,...e};if((await fetch("/api/auth/preferences",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("ms11_token"))},body:JSON.stringify(t)})).ok)c(e=>e?{...e,preferences:t}:null),i.Am.success("Preferences updated");else throw Error("Failed to update preferences")}catch(e){console.error("Preferences update failed:",e),i.Am.error("Failed to update preferences")}},p=async()=>{await u()};return(0,a.jsx)(o.Provider,{value:{user:s,isLoading:l,isAuthenticated:!!s,login:x,logout:()=>{localStorage.removeItem("ms11_token"),c(null),i.Am.success("Logged out successfully"),m.push("/login")},updatePreferences:h,hasPermission:e=>!!s&&("admin"===s.role||s.permissions.includes(e)),refreshUser:p},children:t})}function l(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},82405:function(e,t,s){"use strict";s.d(t,{$q:function(){return d},PF:function(){return m},WebSocketProvider:function(){return c},sO:function(){return l},uS:function(){return u}});var a=s(57437),n=s(2265),r=s(46175);let i=null;{let e=s(12872);i=e.io,e.Socket}let o=(0,n.createContext)(void 0);function c(e){let{children:t}=e,[s,c]=(0,n.useState)(null),[l,d]=(0,n.useState)(!1),[m,u]=(0,n.useState)(null),[x,h]=(0,n.useState)(0),p=(0,n.useRef)(),f=(0,n.useRef)();return(0,n.useEffect)(()=>{if(!i)return;let e=i("ws://localhost:5000",{transports:["websocket","polling"],timeout:2e4,reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:1e4,reconnectionAttempts:5,forceNew:!0});return e.on("connect",()=>{d(!0),h(0),f.current&&clearInterval(f.current),f.current=setInterval(()=>{e.emit("ping",Date.now())},3e4),r.Am.success("Connected to MS11 server",{id:"websocket-connection",duration:3e3})}),e.on("disconnect",e=>{d(!1),f.current&&clearInterval(f.current),"io server disconnect"===e&&r.Am.error("Server disconnected - attempting reconnect...",{id:"websocket-connection"})}),e.on("connect_error",e=>{console.error("❌ WebSocket connection error:",e),h(e=>e+1),x<5?r.Am.error("Connection failed (".concat(x+1,"/5) - retrying..."),{id:"websocket-connection"}):r.Am.error("Unable to connect to MS11 server",{id:"websocket-connection",duration:1e4})}),e.on("reconnect",e=>{r.Am.success("Reconnected to MS11 server",{id:"websocket-connection",duration:2e3})}),e.on("pong",e=>{u(new Date(e))}),e.on("session_update",e=>{}),e.on("mode_execution",e=>{}),e.on("quest_update",e=>{}),e.on("system_alert",e=>{r.Am.error("System Alert: ".concat(e.message),{duration:8e3})}),e.on("performance_metric",e=>{}),c(e),()=>{f.current&&clearInterval(f.current),p.current&&clearTimeout(p.current),e.close()}},[]),(0,a.jsx)(o.Provider,{value:{socket:s,isConnected:l,lastPong:m,reconnectCount:x,sendCommand:e=>{s&&l?s.emit("ms11_command",{...e,timestamp:Date.now(),client_id:s.id}):r.Am.error("Not connected to MS11 server")},subscribeToEvents:(e,t)=>s?(e.forEach(e=>{s.on(e,t)}),()=>{e.forEach(e=>{s.off(e,t)})}):()=>{}},children:t})}function l(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useWebSocket must be used within a WebSocketProvider");return e}function d(){let{subscribeToEvents:e}=l(),[t,s]=(0,n.useState)(null);return(0,n.useEffect)(()=>e(["session_update"],e=>{s(e)}),[e]),t}function m(){let{subscribeToEvents:e}=l(),[t,s]=(0,n.useState)(null);return(0,n.useEffect)(()=>e(["mode_execution"],e=>{s(e)}),[e]),t}function u(){let{subscribeToEvents:e}=l(),[t,s]=(0,n.useState)([]);return(0,n.useEffect)(()=>e(["performance_metric"],e=>{s(t=>[...t.slice(-49),e])}),[e]),t}}},function(e){e.O(0,[216,744],function(){return e(e.s=64765)}),_N_E=e.O()}]);